<section class="home-products">
  <div class="container">
    <div class="row align-items-end">
      <div class="col-md-4 order-md-2 image">
        {{ renderComponent('Image', { image: image }) }}
      </div>
      <div class="col-md-8 order-md-1 headings">
        <div class="o-kicker h4">
          {{ kicker }}
        </div>
        <h2 class="o-title h1">
          {{ title }}
        </h2>
        <a class="button button--text"
          href="{{ link.url }}"
          {{ link.target == '_blank' ? 'target="_blank" rel="noopener noreferrer"' }}
          aria-label="{{ aria_label }}">
          {{ link.title }}
        </a>
      </div>
    </div>
    <div class="row">
      <div class="col">
        {% set numberOfProducts = [product1.visibility, product2.visibility, product3.visibility, product4.visibility]
          |filter(visibility => visibility == true)|length %}
        <div class="product-cards {{ numberOfProducts < 4 ? 'two-rows' }}">
          {% if product1.visibility %}
            {% include 'Partials/_product-card.twig' with { product: product1 } %}
          {% endif %}
          {% if product2.visibility %}
            {% include 'Partials/_product-card.twig' with { product: product2 } %}
          {% endif %}
          {% if product3.visibility %}
            {% include 'Partials/_product-card.twig' with { product: product3 } %}
          {% endif %}
          {% if product4.visibility %}
            {% include 'Partials/_product-card.twig' with { product: product4 } %}
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</section>
